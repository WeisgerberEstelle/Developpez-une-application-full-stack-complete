@if (post) {
  <a routerLink="/feed" class="back-link back-link--desktop" aria-label="Retour au fil d'articles">&larr;</a>

  <div class="page-container--narrow">
    <div class="title-header">
      <a routerLink="/feed" class="back-link back-link--mobile" aria-label="Retour au fil d'articles">&larr;</a>
      <h1 class="page-title page-title--section">{{ post.title }}</h1>
    </div>

    <div class="post-meta">
      <span>{{ post.createdAt | date:'dd/MM/yyyy' }}</span>
      <span>{{ post.author.username }}</span>
      <span>{{ post.topic.name }}</span>
    </div>

    <div class="post-content">
      <p>{{ post.content }}</p>
    </div>

    <hr class="separator" />

    <section class="comments-section">
      <h2 class="section-title">Commentaires</h2>

      @if (comments.length === 0) {
        <p class="empty-message">Aucun commentaire pour le moment.</p>
      }

      <div class="comment-list">
        @for (comment of comments; track comment.id) {
          <div class="comment-item">
            <span class="comment-author">{{ comment.author.username }}</span>
            <p class="comment-content">{{ comment.content }}</p>
          </div>
        }
      </div>

      <div class="comment-form">
        <textarea
          [(ngModel)]="newComment"
          name="newComment"
          rows="4"
          placeholder="Ã‰crivez ici votre commentaire"
          aria-label="Nouveau commentaire"></textarea>
        <button class="send-btn" (click)="addComment()" [disabled]="!newComment.trim()" aria-label="Envoyer le commentaire">
          <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
            <path d="M22 2L11 13"/>
            <path d="M22 2L15 22L11 13L2 9L22 2Z"/>
          </svg>
        </button>
      </div>
      @if (commentError) {
        <div class="error-message" role="alert" aria-live="assertive">{{ commentError }}</div>
      }
    </section>
  </div>
}
